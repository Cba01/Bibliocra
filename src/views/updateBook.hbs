{{!-- Links necesarios para utilizar el Multi-Select de los generos de libros --}}

<!-- Styles -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
<!-- Or for RTL support -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.rtl.min.css" />
<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.0/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>  


<div class="container">
<form action="/api/book/update/{{book._id}}" method="POST" enctype="multipart/form-data">
  <div class="mb-3">
    <label for="title" class="form-label">Titulo</label>
    <input type="text" class="form-control" id="title" name="title" placeholder="Titulo" value="{{book.title}}"/>
  </div>
  <div class="mb-3">
    <label for="description" class="form-label">Descripcion</label>
    <textarea id="description" class="form-control" name="description" placeholder="Description">{{book.description}}</textarea>
  </div>
  <div class="mb-3">
    <label for="image" class="form-label" >Imagen</label>
    <input id="image" class="form-control-file" name="image" type="file">
  </div>
  <div class="mb-3">
    <label for="price" class="form-label">Precio</label>
    <input id="price" type="number" class="form-control" name="price" placeholder="price" value="{{book.price}}" ></input>
  </div>
  <div class="mb-3">
    <label for="genre" class="form-label">Genero</label>

   <select class="form-select" id="multiple-select-field" id="genre" name="genre" data-placeholder="Seleccione las opciones necesarias" multiple>
      <option
      {{#each book.genre}}
            {{log this}}
        {{!-- Si el genero es igual a estÃ¡ opcion entonces poner selected (Se necesita comparar {{this}} con "Terror") EJ: if(this == "Terror") selected; --}}
      {{/each}}
      >Terror</option>
      <option>Thriller</option>
      <option>Crimen</option>
      <option>Suspenso</option>
      <option>Novela psicologica</option>
      <option>Ficcion</option>
      <option>Ciencia ficcion</option>
      <option>Misterio</option>
      <option>Romance</option>
      <option>Fantasia</option>
      <option>Religion</option>
      <option>Motivacion personal</option>
      <option>Infantil</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="author" class="form-label">Autor</label>
    <input id="author" class="form-control" name="author" placeholder="author" value="{{book.author}}" ></input>
  </div>
  <div class="mb-3">
    <label for="date" class="form-label">Fecha</label>
    <input id="date" class="form-control" name="date" type="date" placeholder="date" value="{{book.date}}" ></input>
  </div>
  <div>
    <button type="submit" class="btn btn-primary mb-3">Actualizar</button>
  </div>
</form>

</div>

<script>
  // Script para iniciar el Multi-Select de los generos
  $( '#multiple-select-field' ).select2( {
    theme: "bootstrap-5",
    width: $( this ).data( 'width' ) ? $( this ).data( 'width' ) : $( this ).hasClass( 'w-100' ) ? '100%' : 'style',
    placeholder: $( this ).data( 'placeholder' ),
    closeOnSelect: false,
} );
</script>